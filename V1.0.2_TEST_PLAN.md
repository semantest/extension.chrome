# Version 1.0.2 Test Plan

## Test Overview
Comprehensive test plan for Semantest Extension v1.0.2 with focus on new image handling improvements.

## Critical Test Cases

### 1. Duplicate Image Prevention Tests

#### Test 1.1: Existing Images Not Re-downloaded
**Steps:**
1. Navigate to ChatGPT with existing DALL-E images
2. Trigger image monitoring via extension
3. Verify no existing images are downloaded

**Expected:** Only new images generated after monitoring starts should download

#### Test 1.2: Persistent Download Tracking
**Steps:**
1. Download an image
2. Refresh the page
3. Start monitoring again
4. Generate the same prompt

**Expected:** Previously downloaded images should not re-download

### 2. Queue Management Tests

#### Test 2.1: Multiple Image Requests
**Steps:**
1. Send 5 rapid image generation requests
2. Monitor queue status
3. Verify sequential processing

**Expected:** All requests processed in order without conflicts

#### Test 2.2: Queue Error Recovery
**Steps:**
1. Add requests to queue
2. Simulate network failure
3. Verify retry mechanism

**Expected:** Failed requests retry with exponential backoff

### 3. Custom Filename Tests

#### Test 3.1: Basic Filename Support
**Steps:**
1. Send image request with custom filename
2. Generate image
3. Check downloaded file

**Expected:** File saved with specified name

#### Test 3.2: Filename Sanitization
**Steps:**
1. Send filename with special characters
2. Verify sanitization

**Expected:** Invalid characters removed/replaced

### 4. State Detection Tests

#### Test 4.1: Generation State Tracking
**Steps:**
1. Start image generation
2. Monitor state changes
3. Verify state accuracy

**Expected:** States correctly reflect ChatGPT UI

### 5. Performance Tests

#### Test 5.1: Script Load Time
**Steps:**
1. Measure page load with extension
2. Compare with baseline

**Expected:** <500ms impact on page load

#### Test 5.2: Memory Usage
**Steps:**
1. Generate 50 images
2. Monitor memory consumption

**Expected:** Memory usage stable, no leaks

### 6. Error Handling Tests

#### Test 6.1: Network Failure
**Steps:**
1. Start download
2. Disconnect network
3. Verify error handling

**Expected:** Graceful failure with retry option

#### Test 6.2: Invalid Image URLs
**Steps:**
1. Attempt to download corrupted image
2. Verify error message

**Expected:** Clear error message, no crash

### 7. Integration Tests

#### Test 7.1: Extension-Addon Communication
**Steps:**
1. Send websocket message
2. Verify addon receives
3. Check response

**Expected:** Bidirectional communication works

#### Test 7.2: Multi-Tab Support
**Steps:**
1. Open multiple ChatGPT tabs
2. Generate images in each
3. Verify isolation

**Expected:** Each tab handles its own images

### 8. Security Tests

#### Test 8.1: XSS Prevention
**Steps:**
1. Send prompt with script tags
2. Verify sanitization

**Expected:** Scripts not executed

#### Test 8.2: CSP Compliance
**Steps:**
1. Check console for CSP violations
2. Verify all resources load

**Expected:** No CSP violations

## Regression Tests

### Core Functionality
- [ ] Basic image generation
- [ ] Manual download button
- [ ] Settings persistence
- [ ] Notification system
- [ ] Context menu items

### Edge Cases
- [ ] Very long prompts
- [ ] Rapid clicking
- [ ] Page refresh during generation
- [ ] Browser restart handling
- [ ] Extension update scenario

## Performance Benchmarks

| Metric | Target | Actual |
|--------|--------|--------|
| Page Load Impact | <500ms | TBD |
| Image Detection | <100ms | TBD |
| Download Start | <1s | TBD |
| Memory per Image | <1MB | TBD |
| Queue Processing | <200ms | TBD |

## Test Environment

### Browsers
- Chrome 121+ (primary)
- Edge 121+ (secondary)
- Brave (compatibility)

### ChatGPT Versions
- Free tier
- Plus subscription
- Team workspace

### Network Conditions
- Fast 3G
- Slow 3G
- Offline
- Flaky connection

## Automated Test Coverage

### Unit Tests (Target: 80%)
- Image detection logic
- Queue management
- State detection
- Filename handling

### Integration Tests (Target: 70%)
- WebSocket communication
- Download flow
- Error scenarios
- Multi-tab handling

### E2E Tests (Target: 60%)
- Complete user journeys
- Error recovery
- Performance scenarios

## Test Execution Schedule

### Phase 1: Core Functionality (Day 1)
- Duplicate prevention
- Queue management
- Basic downloads

### Phase 2: Advanced Features (Day 2)
- Custom filenames
- Error handling
- Performance tests

### Phase 3: Integration (Day 3)
- Multi-tab scenarios
- Security tests
- Regression suite

## Success Criteria

- [ ] All critical tests pass
- [ ] No regression from v1.0.1
- [ ] Performance targets met
- [ ] Security vulnerabilities: 0
- [ ] User-reported bugs: <5

## Bug Reporting Template

```markdown
**Version**: 1.0.2
**Browser**: Chrome 121
**Scenario**: [Brief description]
**Steps to Reproduce**:
1. 
2. 
**Expected**: 
**Actual**: 
**Screenshot/Video**: 
**Console Errors**: 
```

---
Test Plan Created by: Quinn
Date: July 29, 2025
Ready for QA Team Execution